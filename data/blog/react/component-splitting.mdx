---
title: '[React] 컴포넌트 쪼개기'
date: '2023-12-31'
tags: ['react', 'component splitting']
draft: false
summary: 언제 컴포넌트를 분리하는지에 대한 개인적인 생각을 정리한 것이다. 
---

리액트로 개발하다 보면 컴포넌트 단위를 어디까지 분리할지 고민하게 되고 분리된 컴포넌트를 재사용하기 위해 의존성이 커지는 경우가 많았다.
이런 고민을 덜기 위해 개인적인 생각을 간단하게 정리해보았다.


## 언제 컴포넌트를 분리해야 하는가?

1. 디자인 시스템에서 나온 ui
버튼이나 네비게이션, 박스, 카드 같은 가장 기본적인 것들은 components 폴더에 두고 재사용한다.

2. ui와 로직을 분리
리액트에서 기본적으로 사용되는 Presentation & Container 패턴에 따라 디자인과 로직을 분리하거나 로직을 custom hook으로 분리한다.

3. 유지보수와 가독성
컴포넌트가 복잡해지면 가독성이 떨어지고 유지보수하기 어려워진다. 이런 경우 재사용할 필요가 없더라도 아토믹 디자인 구조를 통해 더 작은 단위로 분리한다.

4. 재사용
당연하게도 재사용되는 부분은 별개 컴포넌트로 분리한다. 이때 재사용을 위해 발생하는 과한 의존성이 없도록 한다. 의존성이 강해지는 경우 비슷하더라도 따로 코드를 작성하는 것이 좋다.

5. context
context를 사용하는 경우 provider를 분리한다. 이러면 서버 컴포넌트에서 import할 수 있다.

6. Code spliting
크기가 큰 컴포넌트를 분리하고 Code splitting을 통해 번들 사이즈를 줄인다.


## 그 외 생각 정리
디자인과 로직을 분명하게 분리하자. 디자인과 로직이 분리되지 않은 컴포넌트를 재사용하게 되면 의존성이 강해지고 컴포넌트 복잡성이 올라간다. 이렇게 되면 유지보수성과 확장성이 떨어지게 되고 잦은 변경이 일어나게 된다.
OCP(Open-closed priciple)에 따라 확장에 열려있고 변경에 닫혀있도록 해야한다. Presentation/Container 패턴과 Hook 패턴을 통해 디자인과 로직을 각각 재사용한다.
ui 컴포넌트를 재사용할때 수정이 필요해진다면 새로 만드는 것이 낫다. 

재사용되지 않는 컴포넌트를 분리할때는 굳이 파일로 할 필요 없다. 가독성을 해치않고 계층구조가 복잡하지 않다면 상위 컴포넌트가 정의된 파일에 하위 컴포넌트를 함께 정의해도 된다.

컴포넌트, 훅, 컨텍스트 등을 분리했더라도 재사용하지 않는다면 외부의 components, hooks, contexts 폴더로 이동하지말고 같은 폴더 내에 두자. 연관된 것들은 서로 붙어있을 때 관리하기 편하다.

외부에 존재하는 components, hooks, contexts는 폴더는 재사용되는 것들만 모아두자. 내부는 feature단위로 구분하하고 components는 ui 폴더를 내부에 두고 디자인 관련 컴포넌트를 넣어둔다.
